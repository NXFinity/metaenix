"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[4599],{2908:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"api/oauth","title":"OAuth API","description":"The OAuth API provides endpoints for OAuth 2.0 authentication and authorization flows.","source":"@site/docs/api/oauth.md","sourceDirName":"api","slug":"/api/oauth","permalink":"/enix_backend/docs/api/oauth","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/api/oauth.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Developer API","permalink":"/enix_backend/docs/api/developer"},"next":{"title":"Users API","permalink":"/enix_backend/docs/api/users"}}');var i=r(4848),t=r(8453);const o={sidebar_position:2},d="OAuth API",c={},l=[{value:"Base Endpoint",id:"base-endpoint",level:2},{value:"Authorization Endpoint",id:"authorization-endpoint",level:2},{value:"Endpoint",id:"endpoint",level:3},{value:"Query Parameters",id:"query-parameters",level:3},{value:"Example Request",id:"example-request",level:3},{value:"Response",id:"response",level:3},{value:"Error Responses",id:"error-responses",level:3},{value:"Token Endpoint",id:"token-endpoint",level:2},{value:"Endpoint",id:"endpoint-1",level:3},{value:"Request Body",id:"request-body",level:3},{value:"Authorization Code Grant",id:"authorization-code-grant",level:4},{value:"Refresh Token Grant",id:"refresh-token-grant",level:4},{value:"Client Credentials Grant",id:"client-credentials-grant",level:4},{value:"Example Request",id:"example-request-1",level:3},{value:"Response",id:"response-1",level:3},{value:"Error Responses",id:"error-responses-1",level:3},{value:"Revocation Endpoint",id:"revocation-endpoint",level:2},{value:"Endpoint",id:"endpoint-2",level:3},{value:"Request Body",id:"request-body-1",level:3},{value:"Example Request",id:"example-request-2",level:3},{value:"Response",id:"response-2",level:3},{value:"Error Responses",id:"error-responses-2",level:3},{value:"Introspection Endpoint",id:"introspection-endpoint",level:2},{value:"Endpoint",id:"endpoint-3",level:3},{value:"Request Body",id:"request-body-2",level:3},{value:"Example Request",id:"example-request-3",level:3},{value:"Response",id:"response-3",level:3},{value:"Response Fields",id:"response-fields",level:3},{value:"Scopes Endpoint",id:"scopes-endpoint",level:2},{value:"Endpoint",id:"endpoint-4",level:3},{value:"Example Request",id:"example-request-4",level:3},{value:"Response",id:"response-4",level:3},{value:"Grant Types",id:"grant-types",level:2},{value:"Authorization Code Flow",id:"authorization-code-flow",level:3},{value:"Refresh Token Flow",id:"refresh-token-flow",level:3},{value:"Client Credentials Flow",id:"client-credentials-flow",level:3},{value:"PKCE (Proof Key for Code Exchange)",id:"pkce-proof-key-for-code-exchange",level:2},{value:"Example PKCE Implementation",id:"example-pkce-implementation",level:3},{value:"Token Usage",id:"token-usage",level:2},{value:"Error Handling",id:"error-handling",level:2},{value:"Common Errors",id:"common-errors",level:3},{value:"Security Best Practices",id:"security-best-practices",level:2},{value:"Next Steps",id:"next-steps",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"oauth-api",children:"OAuth API"})}),"\n",(0,i.jsx)(n.p,{children:"The OAuth API provides endpoints for OAuth 2.0 authentication and authorization flows."}),"\n",(0,i.jsx)(n.h2,{id:"base-endpoint",children:"Base Endpoint"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET|POST /v1/oauth/*\n"})}),"\n",(0,i.jsx)(n.h2,{id:"authorization-endpoint",children:"Authorization Endpoint"}),"\n",(0,i.jsx)(n.p,{children:"Generate an authorization code for the OAuth 2.0 Authorization Code flow."}),"\n",(0,i.jsx)(n.h3,{id:"endpoint",children:"Endpoint"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"GET /v1/oauth/authorize\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Requires:"})," User authentication (session-based, not OAuth token)"]}),"\n",(0,i.jsx)(n.h3,{id:"query-parameters",children:"Query Parameters"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Required"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"client_id"})}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"Your application's Client ID"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"redirect_uri"})}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"Must match a registered redirect URI"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"response_type"})}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsxs)(n.td,{children:["Must be ",(0,i.jsx)(n.code,{children:"code"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"scope"})}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"Space-separated list of scopes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"state"})}),(0,i.jsx)(n.td,{children:"Recommended"}),(0,i.jsx)(n.td,{children:"Random string for CSRF protection"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"code_challenge"})}),(0,i.jsx)(n.td,{children:"Optional"}),(0,i.jsx)(n.td,{children:"PKCE code challenge (for public clients)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"code_challenge_method"})}),(0,i.jsx)(n.td,{children:"Optional"}),(0,i.jsxs)(n.td,{children:["PKCE method: ",(0,i.jsx)(n.code,{children:"S256"})," or ",(0,i.jsx)(n.code,{children:"plain"})]})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"example-request",children:"Example Request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const clientId = 'your-client-id';\r\nconst redirectUri = encodeURIComponent('https://myapp.com/callback');\r\nconst scopes = encodeURIComponent('read:profile write:posts');\r\nconst state = generateRandomString();\r\n\r\nconst authUrl = `https://api.metaenix.com/v1/oauth/authorize?` +\r\n  `client_id=${clientId}&` +\r\n  `redirect_uri=${redirectUri}&` +\r\n  `response_type=code&` +\r\n  `scope=${scopes}&` +\r\n  `state=${state}`;\r\n\r\n// Redirect user to authUrl\r\nwindow.location.href = authUrl;\n"})}),"\n",(0,i.jsx)(n.h3,{id:"response",children:"Response"}),"\n",(0,i.jsxs)(n.p,{children:["User is redirected to your ",(0,i.jsx)(n.code,{children:"redirect_uri"})," with:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"https://myapp.com/callback?code=AUTHORIZATION_CODE&state=YOUR_STATE\n"})}),"\n",(0,i.jsx)(n.h3,{id:"error-responses",children:"Error Responses"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"400 Bad Request"})," - Invalid parameters:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n  "statusCode": 400,\r\n  "message": "Invalid redirect URI"\r\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"404 Not Found"})," - Application not found:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n  "statusCode": 404,\r\n  "message": "Application not found"\r\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"403 Forbidden"})," - Application not active:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n  "statusCode": 403,\r\n  "message": "Application is not active"\r\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"token-endpoint",children:"Token Endpoint"}),"\n",(0,i.jsx)(n.p,{children:"Exchange authorization code for access token, refresh access token, or issue client credentials token."}),"\n",(0,i.jsx)(n.h3,{id:"endpoint-1",children:"Endpoint"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"POST /v1/oauth/token\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Public endpoint"})," - No authentication required (credentials in body)"]}),"\n",(0,i.jsx)(n.h3,{id:"request-body",children:"Request Body"}),"\n",(0,i.jsxs)(n.p,{children:["Content-Type: ",(0,i.jsx)(n.code,{children:"application/x-www-form-urlencoded"})]}),"\n",(0,i.jsx)(n.h4,{id:"authorization-code-grant",children:"Authorization Code Grant"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"grant_type=authorization_code\r\n&code=AUTHORIZATION_CODE\r\n&redirect_uri=YOUR_REDIRECT_URI\r\n&client_id=YOUR_CLIENT_ID\r\n&client_secret=YOUR_CLIENT_SECRET\r\n&code_verifier=PKCE_CODE_VERIFIER (if using PKCE)\n"})}),"\n",(0,i.jsx)(n.h4,{id:"refresh-token-grant",children:"Refresh Token Grant"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"grant_type=refresh_token\r\n&refresh_token=REFRESH_TOKEN\r\n&client_id=YOUR_CLIENT_ID\r\n&client_secret=YOUR_CLIENT_SECRET\n"})}),"\n",(0,i.jsx)(n.h4,{id:"client-credentials-grant",children:"Client Credentials Grant"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"grant_type=client_credentials\r\n&client_id=YOUR_CLIENT_ID\r\n&client_secret=YOUR_CLIENT_SECRET\r\n&scope=read:profile read:posts (optional)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"example-request-1",children:"Example Request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// Authorization Code Grant\r\nconst response = await fetch('https://api.metaenix.com/v1/oauth/token', {\r\n  method: 'POST',\r\n  headers: {\r\n    'Content-Type': 'application/x-www-form-urlencoded',\r\n  },\r\n  body: new URLSearchParams({\r\n    grant_type: 'authorization_code',\r\n    code: authorizationCode,\r\n    redirect_uri: redirectUri,\r\n    client_id: clientId,\r\n    client_secret: clientSecret,\r\n    code_verifier: codeVerifier, // If using PKCE\r\n  }),\r\n});\r\n\r\nconst tokens = await response.json();\n"})}),"\n",(0,i.jsx)(n.h3,{id:"response-1",children:"Response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n  "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",\r\n  "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",\r\n  "tokenType": "Bearer",\r\n  "expiresIn": 3600,\r\n  "scope": "read:profile write:posts"\r\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note:"})," For client credentials grant, ",(0,i.jsx)(n.code,{children:"refreshToken"})," will be ",(0,i.jsx)(n.code,{children:"null"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"error-responses-1",children:"Error Responses"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"400 Bad Request"})," - Invalid grant:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n  "statusCode": 400,\r\n  "message": "Invalid authorization code"\r\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"401 Unauthorized"})," - Invalid credentials:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n  "statusCode": 401,\r\n  "message": "Invalid client credentials"\r\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"403 Forbidden"})," - Application not active:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n  "statusCode": 403,\r\n  "message": "Application is not active"\r\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"revocation-endpoint",children:"Revocation Endpoint"}),"\n",(0,i.jsx)(n.p,{children:"Revoke an access token or refresh token."}),"\n",(0,i.jsx)(n.h3,{id:"endpoint-2",children:"Endpoint"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"POST /v1/oauth/revoke\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Public endpoint"})," - No authentication required"]}),"\n",(0,i.jsx)(n.h3,{id:"request-body-1",children:"Request Body"}),"\n",(0,i.jsxs)(n.p,{children:["Content-Type: ",(0,i.jsx)(n.code,{children:"application/x-www-form-urlencoded"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"token=TOKEN_TO_REVOKE\r\n&token_type_hint=access_token (optional: access_token or refresh_token)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"example-request-2",children:"Example Request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const response = await fetch('https://api.metaenix.com/v1/oauth/revoke', {\r\n  method: 'POST',\r\n  headers: {\r\n    'Content-Type': 'application/x-www-form-urlencoded',\r\n  },\r\n  body: new URLSearchParams({\r\n    token: accessToken,\r\n    token_type_hint: 'access_token',\r\n  }),\r\n});\r\n\r\n// 200 OK on success\n"})}),"\n",(0,i.jsx)(n.h3,{id:"response-2",children:"Response"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"200 OK"})," - Token revoked successfully:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n  "message": "Token revoked successfully"\r\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"error-responses-2",children:"Error Responses"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"400 Bad Request"})," - Invalid token:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n  "statusCode": 400,\r\n  "message": "Invalid token"\r\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"introspection-endpoint",children:"Introspection Endpoint"}),"\n",(0,i.jsx)(n.p,{children:"Get information about a token (RFC 7662)."}),"\n",(0,i.jsx)(n.h3,{id:"endpoint-3",children:"Endpoint"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"POST /v1/oauth/introspect\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Public endpoint"})," - No authentication required"]}),"\n",(0,i.jsx)(n.h3,{id:"request-body-2",children:"Request Body"}),"\n",(0,i.jsxs)(n.p,{children:["Content-Type: ",(0,i.jsx)(n.code,{children:"application/x-www-form-urlencoded"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"token=TOKEN_TO_INTROSPECT\r\n&token_type_hint=access_token (optional: access_token or refresh_token)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"example-request-3",children:"Example Request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const response = await fetch('https://api.metaenix.com/v1/oauth/introspect', {\r\n  method: 'POST',\r\n  headers: {\r\n    'Content-Type': 'application/x-www-form-urlencoded',\r\n  },\r\n  body: new URLSearchParams({\r\n    token: accessToken,\r\n    token_type_hint: 'access_token',\r\n  }),\r\n});\r\n\r\nconst introspection = await response.json();\n"})}),"\n",(0,i.jsx)(n.h3,{id:"response-3",children:"Response"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Active Token:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n  "active": true,\r\n  "scope": "read:profile write:posts",\r\n  "clientId": "abc123def456",\r\n  "username": "johndoe",\r\n  "exp": 1736942400\r\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Inactive/Invalid Token:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n  "active": false\r\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"response-fields",children:"Response Fields"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Field"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"active"})}),(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:"Whether the token is active"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"scope"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"Space-separated list of scopes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"clientId"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"Application client ID"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"username"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"Username (null for client credentials)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"exp"})}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"Expiration timestamp (Unix)"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"scopes-endpoint",children:"Scopes Endpoint"}),"\n",(0,i.jsx)(n.p,{children:"List all available OAuth scopes with their descriptions and metadata."}),"\n",(0,i.jsx)(n.h3,{id:"endpoint-4",children:"Endpoint"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"GET /v1/oauth/scopes\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Public endpoint"})," - No authentication required"]}),"\n",(0,i.jsx)(n.h3,{id:"example-request-4",children:"Example Request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const response = await fetch('https://api.metaenix.com/v1/oauth/scopes');\r\n\r\nconst { scopes } = await response.json();\n"})}),"\n",(0,i.jsx)(n.h3,{id:"response-4",children:"Response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n  "scopes": [\r\n    {\r\n      "id": "read:profile",\r\n      "name": "Read Profile",\r\n      "description": "Read user profile information",\r\n      "category": "read",\r\n      "group": "profile",\r\n      "requiresApproval": false,\r\n      "isDefault": true\r\n    },\r\n    {\r\n      "id": "write:posts",\r\n      "name": "Write Posts",\r\n      "description": "Create, update, and delete posts",\r\n      "category": "write",\r\n      "group": "posts",\r\n      "requiresApproval": true,\r\n      "isDefault": false\r\n    }\r\n  ]\r\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["See ",(0,i.jsx)(n.a,{href:"../scopes",children:"Scopes"})," documentation for complete list of available scopes."]}),"\n",(0,i.jsx)(n.h2,{id:"grant-types",children:"Grant Types"}),"\n",(0,i.jsx)(n.h3,{id:"authorization-code-flow",children:"Authorization Code Flow"}),"\n",(0,i.jsx)(n.p,{children:"Best for web applications and mobile apps. User authorizes your app, you receive an authorization code, then exchange it for tokens server-side."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Flow:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Redirect user to ",(0,i.jsx)(n.code,{children:"/oauth/authorize"})]}),"\n",(0,i.jsx)(n.li,{children:"User authorizes your app"}),"\n",(0,i.jsx)(n.li,{children:"Receive authorization code via redirect"}),"\n",(0,i.jsxs)(n.li,{children:["Exchange code for tokens at ",(0,i.jsx)(n.code,{children:"/oauth/token"})]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"refresh-token-flow",children:"Refresh Token Flow"}),"\n",(0,i.jsx)(n.p,{children:"Use refresh tokens to obtain new access tokens when they expire."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Flow:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Use refresh token at ",(0,i.jsx)(n.code,{children:"/oauth/token"})," with ",(0,i.jsx)(n.code,{children:"grant_type=refresh_token"})]}),"\n",(0,i.jsx)(n.li,{children:"Receive new access token and refresh token"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"client-credentials-flow",children:"Client Credentials Flow"}),"\n",(0,i.jsx)(n.p,{children:"For server-to-server communication without user interaction."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Flow:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Request tokens at ",(0,i.jsx)(n.code,{children:"/oauth/token"})," with ",(0,i.jsx)(n.code,{children:"grant_type=client_credentials"})]}),"\n",(0,i.jsx)(n.li,{children:"Receive access token (no refresh token)"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"pkce-proof-key-for-code-exchange",children:"PKCE (Proof Key for Code Exchange)"}),"\n",(0,i.jsx)(n.p,{children:"PKCE is recommended for public clients (mobile apps, single-page apps) to prevent authorization code interception."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Flow:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Generate ",(0,i.jsx)(n.code,{children:"code_verifier"})," (random string)"]}),"\n",(0,i.jsxs)(n.li,{children:["Generate ",(0,i.jsx)(n.code,{children:"code_challenge"})," from ",(0,i.jsx)(n.code,{children:"code_verifier"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Method ",(0,i.jsx)(n.code,{children:"S256"}),": SHA256 hash, base64url encoded"]}),"\n",(0,i.jsxs)(n.li,{children:["Method ",(0,i.jsx)(n.code,{children:"plain"}),": ",(0,i.jsx)(n.code,{children:"code_verifier"})," as-is"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Include ",(0,i.jsx)(n.code,{children:"code_challenge"})," and ",(0,i.jsx)(n.code,{children:"code_challenge_method"})," in authorization request"]}),"\n",(0,i.jsxs)(n.li,{children:["Include ",(0,i.jsx)(n.code,{children:"code_verifier"})," when exchanging code for token"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"example-pkce-implementation",children:"Example PKCE Implementation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// Generate code verifier\r\nconst codeVerifier = generateRandomString(128);\r\n\r\n// Generate code challenge (S256)\r\nconst encoder = new TextEncoder();\r\nconst data = encoder.encode(codeVerifier);\r\nconst hash = await crypto.subtle.digest('SHA-256', data);\r\nconst codeChallenge = base64UrlEncode(hash);\r\n\r\n// Authorization request\r\nconst authUrl = `https://api.metaenix.com/v1/oauth/authorize?` +\r\n  `client_id=${clientId}&` +\r\n  `redirect_uri=${redirectUri}&` +\r\n  `response_type=code&` +\r\n  `scope=${scopes}&` +\r\n  `code_challenge=${codeChallenge}&` +\r\n  `code_challenge_method=S256`;\r\n\r\n// Token exchange\r\nconst tokenResponse = await fetch('https://api.metaenix.com/v1/oauth/token', {\r\n  method: 'POST',\r\n  headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\r\n  body: new URLSearchParams({\r\n    grant_type: 'authorization_code',\r\n    code: authorizationCode,\r\n    redirect_uri: redirectUri,\r\n    client_id: clientId,\r\n    code_verifier: codeVerifier, // Include verifier\r\n  }),\r\n});\n"})}),"\n",(0,i.jsx)(n.h2,{id:"token-usage",children:"Token Usage"}),"\n",(0,i.jsxs)(n.p,{children:["Include the access token in the ",(0,i.jsx)(n.code,{children:"Authorization"})," header for all API requests:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const response = await fetch('https://api.metaenix.com/v1/users/me', {\r\n  headers: {\r\n    'Authorization': `Bearer ${accessToken}`,\r\n  },\r\n});\n"})}),"\n",(0,i.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,i.jsx)(n.p,{children:"OAuth endpoints return standard OAuth 2.0 error responses:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n  "error": "invalid_request",\r\n  "error_description": "The request is missing a required parameter"\r\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"common-errors",children:"Common Errors"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"invalid_request"})," - Missing or invalid parameters"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"invalid_client"})," - Invalid client credentials"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"invalid_grant"})," - Invalid authorization code or refresh token"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"unauthorized_client"})," - Client not authorized for this grant type"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"invalid_scope"})," - Requested scope is invalid or not approved"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"access_denied"})," - User denied authorization"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"security-best-practices",children:"Security Best Practices"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Never expose client secret"})," - Keep it server-side only"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use HTTPS"})," - Always use HTTPS in production"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Validate state"})," - Always validate the state parameter"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Store tokens securely"})," - Use secure storage (encrypted database, secure cookies)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Handle token expiration"})," - Implement token refresh logic"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use minimal scopes"})," - Only request the scopes you need"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use PKCE"})," - Always use PKCE for public clients"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"../scopes",children:"Scopes"})})," - Learn what permissions are available"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"./developer",children:"Developer API"})})," - Manage your applications"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"./users",children:"API Reference"})})," - Start making API calls"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>d});var s=r(6540);const i={},t=s.createContext(i);function o(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);