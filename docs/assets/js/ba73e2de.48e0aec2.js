"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[6490],{616:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"events/payloads","title":"Event Payloads","description":"Complete reference for all event types and their payload structures.","source":"@site/docs/events/payloads.md","sourceDirName":"events","slug":"/events/payloads","permalink":"/enix_backend/docs/events/payloads","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/events/payloads.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Using Events","permalink":"/enix_backend/docs/events/using"},"next":{"title":"Error Handling","permalink":"/enix_backend/docs/errors/intro"}}');var d=s(4848),t=s(8453);const l={sidebar_position:4},i="Event Payloads",c={},o=[{value:"User Events",id:"user-events",level:2},{value:"<code>user.followed</code>",id:"userfollowed",level:3},{value:"<code>user.unfollowed</code>",id:"userunfollowed",level:3},{value:"Post Events",id:"post-events",level:2},{value:"<code>post.created</code>",id:"postcreated",level:3},{value:"<code>post.updated</code>",id:"postupdated",level:3},{value:"<code>post.deleted</code>",id:"postdeleted",level:3},{value:"Interaction Events",id:"interaction-events",level:2},{value:"<code>post.liked</code>",id:"postliked",level:3},{value:"<code>post.commented</code>",id:"postcommented",level:3},{value:"<code>post.shared</code>",id:"postshared",level:3},{value:"Connection Events",id:"connection-events",level:2},{value:"<code>connected</code>",id:"connected",level:3},{value:"<code>error</code>",id:"error",level:3},{value:"<code>subscribed</code>",id:"subscribed",level:3},{value:"Payload Validation",id:"payload-validation",level:2},{value:"TypeScript Types",id:"typescript-types",level:2},{value:"Event Ordering",id:"event-ordering",level:2},{value:"Event Deduplication",id:"event-deduplication",level:2},{value:"Next Steps",id:"next-steps",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"event-payloads",children:"Event Payloads"})}),"\n",(0,d.jsx)(n.p,{children:"Complete reference for all event types and their payload structures."}),"\n",(0,d.jsx)(n.h2,{id:"user-events",children:"User Events"}),"\n",(0,d.jsx)(n.h3,{id:"userfollowed",children:(0,d.jsx)(n.code,{children:"user.followed"})}),"\n",(0,d.jsx)(n.p,{children:"Emitted when a user follows another user."}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Namespace:"})," ",(0,d.jsx)(n.code,{children:"/follows"})]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Event Name:"})," ",(0,d.jsx)(n.code,{children:"new_follower"})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Payload:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\r\n  "followerId": "123e4567-e89b-12d3-a456-426614174000",\r\n  "timestamp": "2025-01-15T10:00:00.000Z"\r\n}\n'})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Fields:"})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Field"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"followerId"})}),(0,d.jsx)(n.td,{children:"string (UUID)"}),(0,d.jsx)(n.td,{children:"ID of the user who followed"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"timestamp"})}),(0,d.jsx)(n.td,{children:"string (ISO 8601)"}),(0,d.jsx)(n.td,{children:"When the follow occurred"})]})]})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Example:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-javascript",children:"socket.on('new_follower', (data) => {\r\n  console.log(`User ${data.followerId} followed you at ${data.timestamp}`);\r\n});\n"})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"userunfollowed",children:(0,d.jsx)(n.code,{children:"user.unfollowed"})}),"\n",(0,d.jsx)(n.p,{children:"Emitted when a user unfollows another user."}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Namespace:"})," ",(0,d.jsx)(n.code,{children:"/follows"})]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Event Name:"})," ",(0,d.jsx)(n.code,{children:"unfollow"})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Payload:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\r\n  "followerId": "123e4567-e89b-12d3-a456-426614174000",\r\n  "timestamp": "2025-01-15T10:00:00.000Z"\r\n}\n'})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Fields:"})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Field"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"followerId"})}),(0,d.jsx)(n.td,{children:"string (UUID)"}),(0,d.jsx)(n.td,{children:"ID of the user who unfollowed"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"timestamp"})}),(0,d.jsx)(n.td,{children:"string (ISO 8601)"}),(0,d.jsx)(n.td,{children:"When the unfollow occurred"})]})]})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Example:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-javascript",children:"socket.on('unfollow', (data) => {\r\n  console.log(`User ${data.followerId} unfollowed you at ${data.timestamp}`);\r\n});\n"})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"post-events",children:"Post Events"}),"\n",(0,d.jsx)(n.h3,{id:"postcreated",children:(0,d.jsx)(n.code,{children:"post.created"})}),"\n",(0,d.jsx)(n.p,{children:"Emitted when a new post is created."}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Namespace:"})," ",(0,d.jsx)(n.code,{children:"/posts"})," (coming soon)"]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Event Name:"})," ",(0,d.jsx)(n.code,{children:"post_created"})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Payload:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\r\n  "postId": "123e4567-e89b-12d3-a456-426614174000",\r\n  "authorId": "123e4567-e89b-12d3-a456-426614174001",\r\n  "content": "Post content preview...",\r\n  "isPublic": true,\r\n  "timestamp": "2025-01-15T10:00:00.000Z"\r\n}\n'})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Fields:"})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Field"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"postId"})}),(0,d.jsx)(n.td,{children:"string (UUID)"}),(0,d.jsx)(n.td,{children:"ID of the created post"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"authorId"})}),(0,d.jsx)(n.td,{children:"string (UUID)"}),(0,d.jsx)(n.td,{children:"ID of the post author"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"content"})}),(0,d.jsx)(n.td,{children:"string"}),(0,d.jsx)(n.td,{children:"Preview of post content (truncated)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"isPublic"})}),(0,d.jsx)(n.td,{children:"boolean"}),(0,d.jsx)(n.td,{children:"Whether the post is public"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"timestamp"})}),(0,d.jsx)(n.td,{children:"string (ISO 8601)"}),(0,d.jsx)(n.td,{children:"When the post was created"})]})]})]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"postupdated",children:(0,d.jsx)(n.code,{children:"post.updated"})}),"\n",(0,d.jsx)(n.p,{children:"Emitted when a post is updated."}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Namespace:"})," ",(0,d.jsx)(n.code,{children:"/posts"})," (coming soon)"]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Event Name:"})," ",(0,d.jsx)(n.code,{children:"post_updated"})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Payload:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\r\n  "postId": "123e4567-e89b-12d3-a456-426614174000",\r\n  "authorId": "123e4567-e89b-12d3-a456-426614174001",\r\n  "timestamp": "2025-01-15T10:00:00.000Z"\r\n}\n'})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"postdeleted",children:(0,d.jsx)(n.code,{children:"post.deleted"})}),"\n",(0,d.jsx)(n.p,{children:"Emitted when a post is deleted."}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Namespace:"})," ",(0,d.jsx)(n.code,{children:"/posts"})," (coming soon)"]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Event Name:"})," ",(0,d.jsx)(n.code,{children:"post_deleted"})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Payload:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\r\n  "postId": "123e4567-e89b-12d3-a456-426614174000",\r\n  "authorId": "123e4567-e89b-12d3-a456-426614174001",\r\n  "timestamp": "2025-01-15T10:00:00.000Z"\r\n}\n'})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"interaction-events",children:"Interaction Events"}),"\n",(0,d.jsx)(n.h3,{id:"postliked",children:(0,d.jsx)(n.code,{children:"post.liked"})}),"\n",(0,d.jsx)(n.p,{children:"Emitted when a post is liked."}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Namespace:"})," ",(0,d.jsx)(n.code,{children:"/posts"})," (coming soon)"]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Event Name:"})," ",(0,d.jsx)(n.code,{children:"post_liked"})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Payload:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\r\n  "postId": "123e4567-e89b-12d3-a456-426614174000",\r\n  "userId": "123e4567-e89b-12d3-a456-426614174001",\r\n  "likesCount": 42,\r\n  "timestamp": "2025-01-15T10:00:00.000Z"\r\n}\n'})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"postcommented",children:(0,d.jsx)(n.code,{children:"post.commented"})}),"\n",(0,d.jsx)(n.p,{children:"Emitted when a comment is added to a post."}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Namespace:"})," ",(0,d.jsx)(n.code,{children:"/posts"})," (coming soon)"]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Event Name:"})," ",(0,d.jsx)(n.code,{children:"post_commented"})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Payload:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\r\n  "postId": "123e4567-e89b-12d3-a456-426614174000",\r\n  "commentId": "123e4567-e89b-12d3-a456-426614174002",\r\n  "userId": "123e4567-e89b-12d3-a456-426614174001",\r\n  "content": "Comment content preview...",\r\n  "commentsCount": 15,\r\n  "timestamp": "2025-01-15T10:00:00.000Z"\r\n}\n'})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"postshared",children:(0,d.jsx)(n.code,{children:"post.shared"})}),"\n",(0,d.jsx)(n.p,{children:"Emitted when a post is shared."}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Namespace:"})," ",(0,d.jsx)(n.code,{children:"/posts"})," (coming soon)"]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Event Name:"})," ",(0,d.jsx)(n.code,{children:"post_shared"})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Payload:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\r\n  "postId": "123e4567-e89b-12d3-a456-426614174000",\r\n  "userId": "123e4567-e89b-12d3-a456-426614174001",\r\n  "sharesCount": 8,\r\n  "timestamp": "2025-01-15T10:00:00.000Z"\r\n}\n'})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"connection-events",children:"Connection Events"}),"\n",(0,d.jsx)(n.h3,{id:"connected",children:(0,d.jsx)(n.code,{children:"connected"})}),"\n",(0,d.jsx)(n.p,{children:"Emitted when a WebSocket connection is successfully established and authenticated."}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Namespace:"})," ",(0,d.jsx)(n.code,{children:"/account"}),", ",(0,d.jsx)(n.code,{children:"/follows"}),", ",(0,d.jsx)(n.code,{children:"/posts"})]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Event Name:"})," ",(0,d.jsx)(n.code,{children:"connected"})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Payload:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\r\n  "message": "Connected to account gateway",\r\n  "websocketId": "123e4567-e89b-12d3-a456-426614174000",\r\n  "userId": "123e4567-e89b-12d3-a456-426614174001",\r\n  "username": "johndoe"\r\n}\n'})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Fields:"})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Field"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"message"})}),(0,d.jsx)(n.td,{children:"string"}),(0,d.jsx)(n.td,{children:"Connection success message"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"websocketId"})}),(0,d.jsx)(n.td,{children:"string (UUID)"}),(0,d.jsx)(n.td,{children:"Your application's websocket ID"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"userId"})}),(0,d.jsx)(n.td,{children:"string (UUID)"}),(0,d.jsx)(n.td,{children:"User ID if user-authenticated connection"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"username"})}),(0,d.jsx)(n.td,{children:"string"}),(0,d.jsx)(n.td,{children:"Username if user-authenticated connection"})]})]})]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"error",children:(0,d.jsx)(n.code,{children:"error"})}),"\n",(0,d.jsx)(n.p,{children:"Emitted when an error occurs."}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Namespace:"})," All namespaces"]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Event Name:"})," ",(0,d.jsx)(n.code,{children:"error"})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Payload:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\r\n  "message": "Connection failed: Invalid websocketId"\r\n}\n'})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Common Error Messages:"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:'"Connection failed: Invalid websocketId"'})," - Invalid or missing websocketId"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:'"Connection failed: Internal server error"'})," - Server-side error"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:'"New connection established from another location"'})," - Another connection replaced this one"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:'"Unauthorized"'})," - Not authorized to access this namespace"]}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"subscribed",children:(0,d.jsx)(n.code,{children:"subscribed"})}),"\n",(0,d.jsx)(n.p,{children:"Emitted when successfully subscribed to an event type."}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Namespace:"})," ",(0,d.jsx)(n.code,{children:"/follows"})]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Event Name:"})," ",(0,d.jsx)(n.code,{children:"subscribed"})," (response to ",(0,d.jsx)(n.code,{children:"subscribe_follows"}),")"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Payload:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\r\n  "event": "subscribed",\r\n  "room": "user:123e4567-e89b-12d3-a456-426614174001"\r\n}\n'})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Fields:"})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Field"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"event"})}),(0,d.jsx)(n.td,{children:"string"}),(0,d.jsxs)(n.td,{children:["Always ",(0,d.jsx)(n.code,{children:'"subscribed"'})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"room"})}),(0,d.jsx)(n.td,{children:"string"}),(0,d.jsx)(n.td,{children:"The room identifier you've joined"})]})]})]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"payload-validation",children:"Payload Validation"}),"\n",(0,d.jsx)(n.p,{children:"Always validate event payloads before processing:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-javascript",children:"function validateNewFollowerPayload(data) {\r\n  if (!data || typeof data !== 'object') {\r\n    throw new Error('Invalid payload: must be an object');\r\n  }\r\n  \r\n  if (!data.followerId || typeof data.followerId !== 'string') {\r\n    throw new Error('Invalid payload: followerId must be a string');\r\n  }\r\n  \r\n  if (!data.timestamp || typeof data.timestamp !== 'string') {\r\n    throw new Error('Invalid payload: timestamp must be a string');\r\n  }\r\n  \r\n  // Validate UUID format\r\n  const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\r\n  if (!uuidRegex.test(data.followerId)) {\r\n    throw new Error('Invalid payload: followerId must be a valid UUID');\r\n  }\r\n  \r\n  // Validate ISO 8601 timestamp\r\n  if (isNaN(Date.parse(data.timestamp))) {\r\n    throw new Error('Invalid payload: timestamp must be a valid ISO 8601 date');\r\n  }\r\n  \r\n  return true;\r\n}\r\n\r\nsocket.on('new_follower', (data) => {\r\n  try {\r\n    validateNewFollowerPayload(data);\r\n    // Process valid event\r\n  } catch (error) {\r\n    console.error('Invalid event payload:', error);\r\n  }\r\n});\n"})}),"\n",(0,d.jsx)(n.h2,{id:"typescript-types",children:"TypeScript Types"}),"\n",(0,d.jsx)(n.p,{children:"For TypeScript projects, define types for event payloads:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-typescript",children:"interface NewFollowerPayload {\r\n  followerId: string;\r\n  timestamp: string;\r\n}\r\n\r\ninterface UnfollowPayload {\r\n  followerId: string;\r\n  timestamp: string;\r\n}\r\n\r\ninterface ConnectedPayload {\r\n  message: string;\r\n  websocketId: string;\r\n  userId?: string;\r\n  username?: string;\r\n}\r\n\r\ninterface ErrorPayload {\r\n  message: string;\r\n}\r\n\r\n// Usage\r\nsocket.on('new_follower', (data: NewFollowerPayload) => {\r\n  console.log(data.followerId);\r\n});\n"})}),"\n",(0,d.jsx)(n.h2,{id:"event-ordering",children:"Event Ordering"}),"\n",(0,d.jsxs)(n.p,{children:["Events are delivered in the order they occur, but network conditions may cause slight delays. Always use the ",(0,d.jsx)(n.code,{children:"timestamp"})," field to determine the actual order of events if ordering is critical."]}),"\n",(0,d.jsx)(n.h2,{id:"event-deduplication",children:"Event Deduplication"}),"\n",(0,d.jsx)(n.p,{children:"Events may be delivered multiple times due to reconnections. Implement idempotency using event IDs or timestamps:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-javascript",children:"const processedEvents = new Set();\r\n\r\nsocket.on('new_follower', (data) => {\r\n  const eventId = `${data.followerId}-${data.timestamp}`;\r\n  \r\n  if (processedEvents.has(eventId)) {\r\n    console.log('Duplicate event ignored:', eventId);\r\n    return;\r\n  }\r\n  \r\n  processedEvents.add(eventId);\r\n  // Process event\r\n});\n"})}),"\n",(0,d.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:(0,d.jsx)(n.a,{href:"./intro",children:"Introduction"})})," - Overview of the events system"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:(0,d.jsx)(n.a,{href:"./subscribing",children:"Subscribing"})})," - How to connect and subscribe"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:(0,d.jsx)(n.a,{href:"./using",children:"Using Events"})})," - How to handle events"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>i});var r=s(6540);const d={},t=r.createContext(d);function l(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:l(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);