"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[1948],{4514:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"oauth","title":"OAuth Authentication","description":"Meta EN|IX uses OAuth 2.0 for authentication and authorization. This guide explains how to implement OAuth in your application.","source":"@site/docs/oauth.md","sourceDirName":".","slug":"/oauth","permalink":"/enix_backend/docs/oauth","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/oauth.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"App Setup","permalink":"/enix_backend/docs/app-setup"},"next":{"title":"Scopes","permalink":"/enix_backend/docs/scopes"}}');var s=r(4848),i=r(8453);const a={sidebar_position:3},o="OAuth Authentication",c={},d=[{value:"OAuth Flow Overview",id:"oauth-flow-overview",level:2},{value:"Step 1: Redirect User to Authorization URL",id:"step-1-redirect-user-to-authorization-url",level:2},{value:"Parameters",id:"parameters",level:3},{value:"Example Authorization URL",id:"example-authorization-url",level:3},{value:"Step 2: Handle Authorization Callback",id:"step-2-handle-authorization-callback",level:2},{value:"Validate the State",id:"validate-the-state",level:3},{value:"Step 3: Exchange Code for Access Token",id:"step-3-exchange-code-for-access-token",level:2},{value:"Request Body",id:"request-body",level:3},{value:"Example Request",id:"example-request",level:3},{value:"Response",id:"response",level:3},{value:"Step 4: Use Access Token",id:"step-4-use-access-token",level:2},{value:"Refresh Tokens",id:"refresh-tokens",level:2},{value:"Request Body",id:"request-body-1",level:3},{value:"Example",id:"example",level:3},{value:"Complete Example",id:"complete-example",level:2},{value:"Error Handling",id:"error-handling",level:2},{value:"Security Considerations",id:"security-considerations",level:2},{value:"Next Steps",id:"next-steps",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"oauth-authentication",children:"OAuth Authentication"})}),"\n",(0,s.jsx)(n.p,{children:"Meta EN|IX uses OAuth 2.0 for authentication and authorization. This guide explains how to implement OAuth in your application."}),"\n",(0,s.jsx)(n.h2,{id:"oauth-flow-overview",children:"OAuth Flow Overview"}),"\n",(0,s.jsx)(n.p,{children:"The OAuth 2.0 authorization code flow consists of these steps:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Redirect user to authorization URL"})," - User authorizes your application"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Receive authorization code"})," - User is redirected back with a code"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Exchange code for access token"})," - Server-side exchange using your client secret"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use access token"})," - Make API requests with the access token"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"step-1-redirect-user-to-authorization-url",children:"Step 1: Redirect User to Authorization URL"}),"\n",(0,s.jsx)(n.p,{children:"Construct the authorization URL with the following parameters:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"https://api.metaenix.com/v1/oauth/authorize?\r\n  client_id=YOUR_CLIENT_ID\r\n  &redirect_uri=YOUR_REDIRECT_URI\r\n  &response_type=code\r\n  &scope=SCOPES\r\n  &state=RANDOM_STATE_STRING\n"})}),"\n",(0,s.jsx)(n.h3,{id:"parameters",children:"Parameters"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{children:"Required"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"client_id"})}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Your application's Client ID"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"redirect_uri"})}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Must match a registered redirect URI"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"response_type"})}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsxs)(n.td,{children:["Must be ",(0,s.jsx)(n.code,{children:"code"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"scope"})}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsxs)(n.td,{children:["Space-separated list of scopes (see ",(0,s.jsx)(n.a,{href:"/enix_backend/docs/scopes",children:"Scopes"}),")"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"state"})}),(0,s.jsx)(n.td,{children:"Recommended"}),(0,s.jsx)(n.td,{children:"Random string to prevent CSRF attacks"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"example-authorization-url",children:"Example Authorization URL"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"const clientId = 'your-client-id';\r\nconst redirectUri = encodeURIComponent('https://yourapp.com/callback');\r\nconst scopes = encodeURIComponent('read:user write:post');\r\nconst state = generateRandomString(); // Store in session\r\n\r\nconst authUrl = `https://api.metaenix.com/v1/oauth/authorize?` +\r\n  `client_id=${clientId}&` +\r\n  `redirect_uri=${redirectUri}&` +\r\n  `response_type=code&` +\r\n  `scope=${scopes}&` +\r\n  `state=${state}`;\r\n\r\n// Redirect user to authUrl\r\nwindow.location.href = authUrl;\n"})}),"\n",(0,s.jsx)(n.h2,{id:"step-2-handle-authorization-callback",children:"Step 2: Handle Authorization Callback"}),"\n",(0,s.jsxs)(n.p,{children:["After the user authorizes your application, they'll be redirected to your ",(0,s.jsx)(n.code,{children:"redirect_uri"})," with a ",(0,s.jsx)(n.code,{children:"code"})," and ",(0,s.jsx)(n.code,{children:"state"})," parameter:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"https://yourapp.com/callback?code=AUTHORIZATION_CODE&state=YOUR_STATE\n"})}),"\n",(0,s.jsx)(n.h3,{id:"validate-the-state",children:"Validate the State"}),"\n",(0,s.jsxs)(n.p,{children:["Always validate that the ",(0,s.jsx)(n.code,{children:"state"})," parameter matches what you sent:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// In your callback handler\r\nconst { code, state } = req.query;\r\n\r\n// Verify state matches what you stored\r\nif (state !== storedState) {\r\n  throw new Error('Invalid state parameter');\r\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"step-3-exchange-code-for-access-token",children:"Step 3: Exchange Code for Access Token"}),"\n",(0,s.jsx)(n.p,{children:"Exchange the authorization code for an access token on your server:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"POST /v1/oauth/token\r\nContent-Type: application/x-www-form-urlencoded\n"})}),"\n",(0,s.jsx)(n.h3,{id:"request-body",children:"Request Body"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"grant_type=authorization_code\r\n&code=AUTHORIZATION_CODE\r\n&redirect_uri=YOUR_REDIRECT_URI\r\n&client_id=YOUR_CLIENT_ID\r\n&client_secret=YOUR_CLIENT_SECRET\n"})}),"\n",(0,s.jsx)(n.h3,{id:"example-request",children:"Example Request"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"const response = await fetch('https://api.metaenix.com/v1/oauth/token', {\r\n  method: 'POST',\r\n  headers: {\r\n    'Content-Type': 'application/x-www-form-urlencoded',\r\n  },\r\n  body: new URLSearchParams({\r\n    grant_type: 'authorization_code',\r\n    code: authorizationCode,\r\n    redirect_uri: redirectUri,\r\n    client_id: clientId,\r\n    client_secret: clientSecret, // Keep this server-side!\r\n  }),\r\n});\r\n\r\nconst data = await response.json();\n"})}),"\n",(0,s.jsx)(n.h3,{id:"response",children:"Response"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\r\n  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",\r\n  "token_type": "Bearer",\r\n  "expires_in": 3600,\r\n  "refresh_token": "refresh_token_here",\r\n  "scope": "read:user write:post"\r\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"step-4-use-access-token",children:"Step 4: Use Access Token"}),"\n",(0,s.jsxs)(n.p,{children:["Include the access token in the ",(0,s.jsx)(n.code,{children:"Authorization"})," header for all API requests:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"const response = await fetch('https://api.metaenix.com/v1/users/me', {\r\n  headers: {\r\n    'Authorization': `Bearer ${accessToken}`,\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\nconst userData = await response.json();\n"})}),"\n",(0,s.jsx)(n.h2,{id:"refresh-tokens",children:"Refresh Tokens"}),"\n",(0,s.jsx)(n.p,{children:"Access tokens expire after a set period. Use the refresh token to obtain a new access token:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"POST /v1/oauth/token\r\nContent-Type: application/x-www-form-urlencoded\n"})}),"\n",(0,s.jsx)(n.h3,{id:"request-body-1",children:"Request Body"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"grant_type=refresh_token\r\n&refresh_token=REFRESH_TOKEN\r\n&client_id=YOUR_CLIENT_ID\r\n&client_secret=YOUR_CLIENT_SECRET\n"})}),"\n",(0,s.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"const response = await fetch('https://api.metaenix.com/v1/oauth/token', {\r\n  method: 'POST',\r\n  headers: {\r\n    'Content-Type': 'application/x-www-form-urlencoded',\r\n  },\r\n  body: new URLSearchParams({\r\n    grant_type: 'refresh_token',\r\n    refresh_token: refreshToken,\r\n    client_id: clientId,\r\n    client_secret: clientSecret,\r\n  }),\r\n});\r\n\r\nconst { access_token, refresh_token } = await response.json();\n"})}),"\n",(0,s.jsx)(n.h2,{id:"complete-example",children:"Complete Example"}),"\n",(0,s.jsx)(n.p,{children:"Here's a complete example using Node.js and Express:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"const express = require('express');\r\nconst app = express();\r\n\r\nconst CLIENT_ID = process.env.CLIENT_ID;\r\nconst CLIENT_SECRET = process.env.CLIENT_SECRET;\r\nconst REDIRECT_URI = 'https://yourapp.com/callback';\r\n\r\n// Step 1: Redirect to authorization\r\napp.get('/auth', (req, res) => {\r\n  const state = generateRandomString();\r\n  req.session.state = state;\r\n  \r\n  const authUrl = `https://api.metaenix.com/v1/oauth/authorize?` +\r\n    `client_id=${CLIENT_ID}&` +\r\n    `redirect_uri=${encodeURIComponent(REDIRECT_URI)}&` +\r\n    `response_type=code&` +\r\n    `scope=read:user write:post&` +\r\n    `state=${state}`;\r\n  \r\n  res.redirect(authUrl);\r\n});\r\n\r\n// Step 2 & 3: Handle callback and exchange code\r\napp.get('/callback', async (req, res) => {\r\n  const { code, state } = req.query;\r\n  \r\n  // Validate state\r\n  if (state !== req.session.state) {\r\n    return res.status(400).send('Invalid state');\r\n  }\r\n  \r\n  // Exchange code for token\r\n  const tokenResponse = await fetch('https://api.metaenix.com/v1/oauth/token', {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\r\n    body: new URLSearchParams({\r\n      grant_type: 'authorization_code',\r\n      code,\r\n      redirect_uri: REDIRECT_URI,\r\n      client_id: CLIENT_ID,\r\n      client_secret: CLIENT_SECRET,\r\n    }),\r\n  });\r\n  \r\n  const tokens = await tokenResponse.json();\r\n  \r\n  // Store tokens securely (e.g., in session or database)\r\n  req.session.accessToken = tokens.access_token;\r\n  req.session.refreshToken = tokens.refresh_token;\r\n  \r\n  res.redirect('/dashboard');\r\n});\r\n\r\n// Step 4: Make API calls\r\napp.get('/api/user', async (req, res) => {\r\n  const response = await fetch('https://api.metaenix.com/v1/users/me', {\r\n    headers: {\r\n      'Authorization': `Bearer ${req.session.accessToken}`,\r\n    },\r\n  });\r\n  \r\n  const userData = await response.json();\r\n  res.json(userData);\r\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,s.jsx)(n.p,{children:"The OAuth endpoints may return errors:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\r\n  "error": "invalid_request",\r\n  "error_description": "The request is missing a required parameter"\r\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Common errors:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"invalid_request"})," - Missing or invalid parameters"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"invalid_client"})," - Invalid client credentials"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"invalid_grant"})," - Invalid authorization code or refresh token"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"unauthorized_client"})," - Client not authorized for this grant type"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"invalid_scope"})," - Requested scope is invalid"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Always handle errors gracefully and provide user feedback."}),"\n",(0,s.jsx)(n.h2,{id:"security-considerations",children:"Security Considerations"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Never expose client secret"})," - Keep it server-side only"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use HTTPS"})," - Always use HTTPS in production"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Validate state"})," - Always validate the state parameter"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Store tokens securely"})," - Use secure storage (encrypted database, secure cookies)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Handle token expiration"})," - Implement token refresh logic"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use minimal scopes"})," - Only request the scopes you need"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"./scopes",children:"Understand Scopes"})})," - Learn what permissions are available"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"./api/users",children:"Explore the API Reference"})})," - Start making API calls"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>o});var t=r(6540);const s={},i=t.createContext(s);function a(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);