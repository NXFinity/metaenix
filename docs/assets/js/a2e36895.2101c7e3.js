"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[2850],{8453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>o});var t=r(6540);const s={},i=t.createContext(s);function a(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(i.Provider,{value:n},e.children)}},8599:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"practices/intro","title":"Best Practices","description":"Follow these best practices to build reliable, secure, and efficient integrations with the Meta EN|IX API.","source":"@site/docs/practices/intro.md","sourceDirName":"practices","slug":"/practices/intro","permalink":"/metaenix/docs/practices/intro","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/practices/intro.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Rate Limits","permalink":"/metaenix/docs/limits/intro"},"next":{"title":"Troubleshooting","permalink":"/metaenix/docs/troubleshooting/intro"}}');var s=r(4848),i=r(8453);const a={sidebar_position:1},o="Best Practices",l={},c=[{value:"Security",id:"security",level:2},{value:"1. Protect Your Credentials",id:"1-protect-your-credentials",level:3},{value:"2. Use HTTPS Always",id:"2-use-https-always",level:3},{value:"3. Validate Redirect URIs",id:"3-validate-redirect-uris",level:3},{value:"4. Store Tokens Securely",id:"4-store-tokens-securely",level:3},{value:"5. Implement Token Refresh",id:"5-implement-token-refresh",level:3},{value:"Performance",id:"performance",level:2},{value:"1. Implement Caching",id:"1-implement-caching",level:3},{value:"2. Use Pagination Efficiently",id:"2-use-pagination-efficiently",level:3},{value:"3. Batch Operations",id:"3-batch-operations",level:3},{value:"4. Implement Request Deduplication",id:"4-implement-request-deduplication",level:3},{value:"Error Handling",id:"error-handling",level:2},{value:"1. Implement Retry Logic",id:"1-implement-retry-logic",level:3},{value:"2. Handle Rate Limits Gracefully",id:"2-handle-rate-limits-gracefully",level:3},{value:"3. Validate Responses",id:"3-validate-responses",level:3},{value:"Code Organization",id:"code-organization",level:2},{value:"1. Create an API Client Class",id:"1-create-an-api-client-class",level:3},{value:"2. Use TypeScript for Type Safety",id:"2-use-typescript-for-type-safety",level:3},{value:"Testing",id:"testing",level:2},{value:"1. Mock API Responses",id:"1-mock-api-responses",level:3},{value:"2. Test Error Handling",id:"2-test-error-handling",level:3},{value:"Monitoring",id:"monitoring",level:2},{value:"1. Log API Calls",id:"1-log-api-calls",level:3},{value:"2. Monitor Rate Limits",id:"2-monitor-rate-limits",level:3},{value:"WebSocket Best Practices",id:"websocket-best-practices",level:2},{value:"1. Handle Reconnections",id:"1-handle-reconnections",level:3},{value:"2. Validate Event Payloads",id:"2-validate-event-payloads",level:3},{value:"Summary",id:"summary",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"best-practices",children:"Best Practices"})}),"\n",(0,s.jsx)(n.p,{children:"Follow these best practices to build reliable, secure, and efficient integrations with the Meta EN|IX API."}),"\n",(0,s.jsx)(n.h2,{id:"security",children:"Security"}),"\n",(0,s.jsx)(n.h3,{id:"1-protect-your-credentials",children:"1. Protect Your Credentials"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Never expose client secrets or websocketIds in client-side code."})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// \u274c BAD - Exposing credentials\r\nconst clientSecret = 'your-secret'; // In frontend code\r\n\r\n// \u2705 GOOD - Keep secrets server-side\r\n// Store in environment variables\r\nconst clientSecret = process.env.CLIENT_SECRET;\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-use-https-always",children:"2. Use HTTPS Always"}),"\n",(0,s.jsx)(n.p,{children:"Always use HTTPS in production:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// \u274c BAD\r\nconst apiUrl = 'http://api.metaenix.com/v1';\r\n\r\n// \u2705 GOOD\r\nconst apiUrl = 'https://api.metaenix.com/v1';\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-validate-redirect-uris",children:"3. Validate Redirect URIs"}),"\n",(0,s.jsx)(n.p,{children:"Always validate redirect URIs server-side:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"function validateRedirectUri(uri, allowedUris) {\r\n  // Must match exactly (including protocol and trailing slashes)\r\n  return allowedUris.some(allowed => {\r\n    try {\r\n      const allowedUrl = new URL(allowed);\r\n      const uriUrl = new URL(uri);\r\n      return allowedUrl.origin === uriUrl.origin && \r\n             allowedUrl.pathname === uriUrl.pathname;\r\n    } catch {\r\n      return false;\r\n    }\r\n  });\r\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"4-store-tokens-securely",children:"4. Store Tokens Securely"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// \u2705 GOOD - Secure token storage\r\n// Server-side: Use encrypted storage\r\nconst encryptedToken = encrypt(accessToken);\r\n\r\n// Client-side: Use httpOnly cookies or secure storage\r\n// Never store in localStorage for sensitive apps\n"})}),"\n",(0,s.jsx)(n.h3,{id:"5-implement-token-refresh",children:"5. Implement Token Refresh"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"class TokenManager {\r\n  constructor() {\r\n    this.accessToken = null;\r\n    this.refreshToken = null;\r\n    this.expiresAt = null;\r\n  }\r\n  \r\n  async getValidToken() {\r\n    // Check if token is expired or about to expire\r\n    if (!this.accessToken || this.isExpired()) {\r\n      await this.refresh();\r\n    }\r\n    return this.accessToken;\r\n  }\r\n  \r\n  isExpired() {\r\n    if (!this.expiresAt) return true;\r\n    // Refresh if expires within 5 minutes\r\n    return Date.now() >= (this.expiresAt - 5 * 60 * 1000);\r\n  }\r\n  \r\n  async refresh() {\r\n    const response = await fetch('https://api.metaenix.com/v1/oauth/token', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\r\n      body: new URLSearchParams({\r\n        grant_type: 'refresh_token',\r\n        refresh_token: this.refreshToken,\r\n        client_id: CLIENT_ID,\r\n        client_secret: CLIENT_SECRET\r\n      })\r\n    });\r\n    \r\n    const data = await response.json();\r\n    this.accessToken = data.access_token;\r\n    this.refreshToken = data.refresh_token;\r\n    this.expiresAt = Date.now() + (data.expires_in * 1000);\r\n  }\r\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"performance",children:"Performance"}),"\n",(0,s.jsx)(n.h3,{id:"1-implement-caching",children:"1. Implement Caching"}),"\n",(0,s.jsx)(n.p,{children:"Cache responses when appropriate:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"class ApiCache {\r\n  constructor(ttl = 60000) {\r\n    this.cache = new Map();\r\n    this.ttl = ttl;\r\n  }\r\n  \r\n  async get(key, fetchFn) {\r\n    const cached = this.cache.get(key);\r\n    \r\n    if (cached && Date.now() - cached.timestamp < this.ttl) {\r\n      return cached.data;\r\n    }\r\n    \r\n    const data = await fetchFn();\r\n    this.cache.set(key, {\r\n      data,\r\n      timestamp: Date.now()\r\n    });\r\n    \r\n    return data;\r\n  }\r\n  \r\n  invalidate(pattern) {\r\n    for (const key of this.cache.keys()) {\r\n      if (key.includes(pattern)) {\r\n        this.cache.delete(key);\r\n      }\r\n    }\r\n  }\r\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-use-pagination-efficiently",children:"2. Use Pagination Efficiently"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"async function fetchAllPages(endpoint, options = {}) {\r\n  const results = [];\r\n  let page = 1;\r\n  let hasMore = true;\r\n  \r\n  while (hasMore) {\r\n    const response = await fetch(`${endpoint}?page=${page}&limit=100`, options);\r\n    const data = await response.json();\r\n    \r\n    results.push(...data.data);\r\n    \r\n    hasMore = page < data.meta.totalPages;\r\n    page++;\r\n    \r\n    // Rate limit consideration\r\n    if (hasMore) {\r\n      await new Promise(resolve => setTimeout(resolve, 100));\r\n    }\r\n  }\r\n  \r\n  return results;\r\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-batch-operations",children:"3. Batch Operations"}),"\n",(0,s.jsx)(n.p,{children:"Group related operations when possible:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// \u274c BAD - Multiple individual requests\r\nfor (const postId of postIds) {\r\n  await fetch(`/v1/posts/${postId}/like`, { method: 'POST' });\r\n}\r\n\r\n// \u2705 GOOD - Batch request if available\r\nawait fetch('/v1/posts/batch-like', {\r\n  method: 'POST',\r\n  body: JSON.stringify({ postIds })\r\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"4-implement-request-deduplication",children:"4. Implement Request Deduplication"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"class RequestDeduplicator {\r\n  constructor() {\r\n    this.pending = new Map();\r\n  }\r\n  \r\n  async request(key, requestFn) {\r\n    if (this.pending.has(key)) {\r\n      return this.pending.get(key);\r\n    }\r\n    \r\n    const promise = requestFn().finally(() => {\r\n      this.pending.delete(key);\r\n    });\r\n    \r\n    this.pending.set(key, promise);\r\n    return promise;\r\n  }\r\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,s.jsx)(n.h3,{id:"1-implement-retry-logic",children:"1. Implement Retry Logic"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"async function fetchWithRetry(url, options, maxRetries = 3) {\r\n  for (let attempt = 0; attempt < maxRetries; attempt++) {\r\n    try {\r\n      const response = await fetch(url, options);\r\n      \r\n      // Don't retry client errors (4xx)\r\n      if (response.status >= 400 && response.status < 500) {\r\n        return response;\r\n      }\r\n      \r\n      // Retry server errors (5xx) and network errors\r\n      if (response.ok || attempt === maxRetries - 1) {\r\n        return response;\r\n      }\r\n      \r\n      // Exponential backoff\r\n      await new Promise(resolve => \r\n        setTimeout(resolve, Math.pow(2, attempt) * 1000)\r\n      );\r\n    } catch (error) {\r\n      if (attempt === maxRetries - 1) throw error;\r\n      await new Promise(resolve => \r\n        setTimeout(resolve, Math.pow(2, attempt) * 1000)\r\n      );\r\n    }\r\n  }\r\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-handle-rate-limits-gracefully",children:"2. Handle Rate Limits Gracefully"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"async function fetchWithRateLimitHandling(url, options) {\r\n  const response = await fetch(url, options);\r\n  \r\n  if (response.status === 429) {\r\n    const error = await response.json();\r\n    const resetTime = new Date(error.resetAt);\r\n    const waitTime = Math.max(0, resetTime.getTime() - Date.now());\r\n    \r\n    if (waitTime > 0) {\r\n      await new Promise(resolve => setTimeout(resolve, waitTime));\r\n      return fetch(url, options); // Retry\r\n    }\r\n  }\r\n  \r\n  return response;\r\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-validate-responses",children:"3. Validate Responses"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"function validateResponse(response, expectedStatus = 200) {\r\n  if (response.status !== expectedStatus) {\r\n    throw new Error(`Unexpected status: ${response.status}`);\r\n  }\r\n  \r\n  const contentType = response.headers.get('content-type');\r\n  if (!contentType || !contentType.includes('application/json')) {\r\n    throw new Error('Expected JSON response');\r\n  }\r\n  \r\n  return true;\r\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"code-organization",children:"Code Organization"}),"\n",(0,s.jsx)(n.h3,{id:"1-create-an-api-client-class",children:"1. Create an API Client Class"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"class MetaEnixClient {\r\n  constructor(clientId, clientSecret, baseUrl = 'https://api.metaenix.com/v1') {\r\n    this.clientId = clientId;\r\n    this.clientSecret = clientSecret;\r\n    this.baseUrl = baseUrl;\r\n    this.tokenManager = new TokenManager();\r\n  }\r\n  \r\n  async request(method, path, options = {}) {\r\n    const token = await this.tokenManager.getValidToken();\r\n    \r\n    const response = await fetch(`${this.baseUrl}${path}`, {\r\n      method,\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`,\r\n        'Content-Type': 'application/json',\r\n        ...options.headers\r\n      },\r\n      ...options\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      const error = await response.json();\r\n      throw new ApiError(error);\r\n    }\r\n    \r\n    return response.json();\r\n  }\r\n  \r\n  async get(path, options) {\r\n    return this.request('GET', path, options);\r\n  }\r\n  \r\n  async post(path, body, options) {\r\n    return this.request('POST', path, {\r\n      ...options,\r\n      body: JSON.stringify(body)\r\n    });\r\n  }\r\n  \r\n  // Add more methods as needed\r\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-use-typescript-for-type-safety",children:"2. Use TypeScript for Type Safety"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface User {\r\n  id: string;\r\n  username: string;\r\n  email: string;\r\n  displayName: string;\r\n}\r\n\r\ninterface ApiResponse<T> {\r\n  data: T;\r\n  meta?: {\r\n    page: number;\r\n    limit: number;\r\n    total: number;\r\n    totalPages: number;\r\n  };\r\n}\r\n\r\nclass MetaEnixClient {\r\n  async getUser(id: string): Promise<User> {\r\n    return this.get(`/users/${id}`);\r\n  }\r\n  \r\n  async getUsers(page = 1): Promise<ApiResponse<User[]>> {\r\n    return this.get(`/users?page=${page}`);\r\n  }\r\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"testing",children:"Testing"}),"\n",(0,s.jsx)(n.h3,{id:"1-mock-api-responses",children:"1. Mock API Responses"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// Mock fetch for testing\r\nglobal.fetch = jest.fn((url) => {\r\n  if (url.includes('/users/me')) {\r\n    return Promise.resolve({\r\n      ok: true,\r\n      json: () => Promise.resolve({\r\n        id: 'test-user-id',\r\n        username: 'testuser'\r\n      })\r\n    });\r\n  }\r\n  \r\n  return Promise.reject(new Error('Unknown URL'));\r\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-test-error-handling",children:"2. Test Error Handling"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"describe('Error Handling', () => {\r\n  it('should handle 429 rate limit errors', async () => {\r\n    global.fetch = jest.fn(() => Promise.resolve({\r\n      status: 429,\r\n      json: () => Promise.resolve({\r\n        statusCode: 429,\r\n        message: ['Too many requests'],\r\n        resetAt: new Date(Date.now() + 60000).toISOString()\r\n      })\r\n    }));\r\n    \r\n    await expect(client.get('/users/me')).rejects.toThrow();\r\n  });\r\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"monitoring",children:"Monitoring"}),"\n",(0,s.jsx)(n.h3,{id:"1-log-api-calls",children:"1. Log API Calls"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"class LoggingClient extends MetaEnixClient {\r\n  async request(method, path, options) {\r\n    const startTime = Date.now();\r\n    \r\n    try {\r\n      const response = await super.request(method, path, options);\r\n      const duration = Date.now() - startTime;\r\n      \r\n      console.log(`API Call: ${method} ${path} - ${duration}ms`);\r\n      return response;\r\n    } catch (error) {\r\n      const duration = Date.now() - startTime;\r\n      console.error(`API Error: ${method} ${path} - ${duration}ms`, error);\r\n      throw error;\r\n    }\r\n  }\r\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-monitor-rate-limits",children:"2. Monitor Rate Limits"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"class RateLimitMonitor {\r\n  constructor() {\r\n    this.stats = new Map();\r\n  }\r\n  \r\n  recordRequest(endpoint, response) {\r\n    const remaining = parseInt(\r\n      response.headers.get('X-RateLimit-Remaining') || '0'\r\n    );\r\n    const limit = parseInt(\r\n      response.headers.get('X-RateLimit-Limit') || '0'\r\n    );\r\n    \r\n    if (!this.stats.has(endpoint)) {\r\n      this.stats.set(endpoint, { requests: 0, rateLimited: 0 });\r\n    }\r\n    \r\n    const stats = this.stats.get(endpoint);\r\n    stats.requests++;\r\n    \r\n    if (remaining === 0) {\r\n      stats.rateLimited++;\r\n      console.warn(`Rate limit reached for ${endpoint}`);\r\n    }\r\n  }\r\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"websocket-best-practices",children:"WebSocket Best Practices"}),"\n",(0,s.jsx)(n.h3,{id:"1-handle-reconnections",children:"1. Handle Reconnections"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"const socket = io('https://api.metaenix.com/account', {\r\n  reconnection: true,\r\n  reconnectionDelay: 1000,\r\n  reconnectionDelayMax: 5000,\r\n  reconnectionAttempts: 5\r\n});\r\n\r\nsocket.on('reconnect', (attemptNumber) => {\r\n  console.log(`Reconnected after ${attemptNumber} attempts`);\r\n  // Re-subscribe to events\r\n  socket.emit('subscribe_follows');\r\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-validate-event-payloads",children:"2. Validate Event Payloads"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"socket.on('new_follower', (data) => {\r\n  // Validate payload\r\n  if (!data.followerId || !data.timestamp) {\r\n    console.error('Invalid event payload:', data);\r\n    return;\r\n  }\r\n  \r\n  // Process event\r\n  handleNewFollower(data);\r\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Security"}),": Protect credentials, use HTTPS, validate inputs"]}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Performance"}),": Cache responses, use pagination efficiently, batch operations"]}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Error Handling"}),": Implement retry logic, handle rate limits, validate responses"]}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Code Organization"}),": Create API client classes, use TypeScript"]}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Testing"}),": Mock API responses, test error scenarios"]}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Monitoring"}),": Log API calls, monitor rate limits"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"../errors/intro",children:"Error Handling"})})," - Detailed error handling guide"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"../limits/intro",children:"Rate Limits"})})," - Understanding rate limits"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"../troubleshooting/intro",children:"Troubleshooting"})})," - Common issues and solutions"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);