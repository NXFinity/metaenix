"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[197],{8283:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>p,frontMatter:()=>a,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"api/storage","title":"Storage API","description":"The Storage API allows you to upload, manage, and delete files using Digital Ocean Spaces (S3-compatible storage).","source":"@site/docs/api/storage.md","sourceDirName":"api","slug":"/api/storage","permalink":"/metaenix/docs/api/storage","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/api/storage.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Posts API","permalink":"/metaenix/docs/api/posts"},"next":{"title":"Events Introduction","permalink":"/metaenix/docs/events/intro"}}');var i=s(4848),l=s(8453);const a={sidebar_position:4},t="Storage API",d={},o=[{value:"Base Endpoint",id:"base-endpoint",level:2},{value:"Upload File",id:"upload-file",level:2},{value:"Endpoint",id:"endpoint",level:3},{value:"Headers",id:"headers",level:3},{value:"Request Body",id:"request-body",level:3},{value:"Supported File Types",id:"supported-file-types",level:3},{value:"File Size Limits",id:"file-size-limits",level:3},{value:"Example Request",id:"example-request",level:3},{value:"Response",id:"response",level:3},{value:"Upload Multiple Files",id:"upload-multiple-files",level:2},{value:"Endpoint",id:"endpoint-1",level:3},{value:"Request Body",id:"request-body-1",level:3},{value:"Example Request",id:"example-request-1",level:3},{value:"Response",id:"response-1",level:3},{value:"Delete File",id:"delete-file",level:2},{value:"Endpoint",id:"endpoint-2",level:3},{value:"Parameters",id:"parameters",level:3},{value:"Example Request",id:"example-request-2",level:3},{value:"Response",id:"response-2",level:3},{value:"Get File Info",id:"get-file-info",level:2},{value:"Endpoint",id:"endpoint-3",level:3},{value:"Example Request",id:"example-request-3",level:3},{value:"Response",id:"response-3",level:3},{value:"Get User Files",id:"get-user-files",level:2},{value:"Endpoint",id:"endpoint-4",level:3},{value:"Query Parameters",id:"query-parameters",level:3},{value:"Example Request",id:"example-request-4",level:3},{value:"Response",id:"response-4",level:3},{value:"Storage Quota",id:"storage-quota",level:2},{value:"Endpoint",id:"endpoint-5",level:3},{value:"Using Files in Posts",id:"using-files-in-posts",level:2},{value:"Error Responses",id:"error-responses",level:2},{value:"400 Bad Request",id:"400-bad-request",level:3},{value:"403 Forbidden",id:"403-forbidden",level:3},{value:"404 Not Found",id:"404-not-found",level:3},{value:"415 Unsupported Media Type",id:"415-unsupported-media-type",level:3},{value:"Required Scopes",id:"required-scopes",level:2},{value:"Rate Limits",id:"rate-limits",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Next Steps",id:"next-steps",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"storage-api",children:"Storage API"})}),"\n",(0,i.jsx)(n.p,{children:"The Storage API allows you to upload, manage, and delete files using Digital Ocean Spaces (S3-compatible storage)."}),"\n",(0,i.jsx)(n.h2,{id:"base-endpoint",children:"Base Endpoint"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"POST|DELETE /v1/storage/*\n"})}),"\n",(0,i.jsx)(n.h2,{id:"upload-file",children:"Upload File"}),"\n",(0,i.jsx)(n.p,{children:"Upload a file to storage."}),"\n",(0,i.jsx)(n.h3,{id:"endpoint",children:"Endpoint"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"POST /v1/storage/upload\n"})}),"\n",(0,i.jsx)(n.h3,{id:"headers",children:"Headers"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Authorization: Bearer YOUR_ACCESS_TOKEN\r\nContent-Type: multipart/form-data\n"})}),"\n",(0,i.jsx)(n.h3,{id:"request-body",children:"Request Body"}),"\n",(0,i.jsxs)(n.p,{children:["Form data with ",(0,i.jsx)(n.code,{children:"file"})," field containing the file."]}),"\n",(0,i.jsx)(n.h3,{id:"supported-file-types",children:"Supported File Types"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Images:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"JPEG, JPG, PNG, GIF, WebP"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Videos:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"MP4, WebM, QuickTime"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Audio:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"MPEG, MP3, WAV, OGG"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Documents:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"PDF, DOC, DOCX, XLS, XLSX, TXT, CSV"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"file-size-limits",children:"File Size Limits"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Images/Videos:"})," Maximum 100MB per file"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Documents:"})," Maximum 50MB per file"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Total storage quota:"})," Check user profile for limits"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"example-request",children:"Example Request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const formData = new FormData();\r\nformData.append('file', fileInput.files[0]);\r\n\r\nconst response = await fetch('https://api.metaenix.com/v1/storage/upload', {\r\n  method: 'POST',\r\n  headers: {\r\n    'Authorization': `Bearer ${accessToken}`,\r\n  },\r\n  body: formData,\r\n});\r\n\r\nconst result = await response.json();\n"})}),"\n",(0,i.jsx)(n.h3,{id:"response",children:"Response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n  "fileKey": "unique-file-key-123",\r\n  "url": "https://spaces.example.com/unique-file-key-123.jpg",\r\n  "size": 1024000,\r\n  "mimeType": "image/jpeg",\r\n  "type": "image",\r\n  "uploadedAt": "2025-01-15T10:00:00Z"\r\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"upload-multiple-files",children:"Upload Multiple Files"}),"\n",(0,i.jsx)(n.p,{children:"Upload multiple files in a single request."}),"\n",(0,i.jsx)(n.h3,{id:"endpoint-1",children:"Endpoint"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"POST /v1/storage/upload\n"})}),"\n",(0,i.jsx)(n.h3,{id:"request-body-1",children:"Request Body"}),"\n",(0,i.jsxs)(n.p,{children:["Form data with multiple ",(0,i.jsx)(n.code,{children:"file"})," fields."]}),"\n",(0,i.jsx)(n.h3,{id:"example-request-1",children:"Example Request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const formData = new FormData();\r\nformData.append('file', file1);\r\nformData.append('file', file2);\r\nformData.append('file', file3);\r\n\r\nconst response = await fetch('https://api.metaenix.com/v1/storage/upload', {\r\n  method: 'POST',\r\n  headers: {\r\n    'Authorization': `Bearer ${accessToken}`,\r\n  },\r\n  body: formData,\r\n});\r\n\r\nconst results = await response.json();\n"})}),"\n",(0,i.jsx)(n.h3,{id:"response-1",children:"Response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n  "files": [\r\n    {\r\n      "fileKey": "file-key-1",\r\n      "url": "https://spaces.example.com/file-key-1.jpg",\r\n      "size": 1024000,\r\n      "mimeType": "image/jpeg",\r\n      "type": "image"\r\n    },\r\n    {\r\n      "fileKey": "file-key-2",\r\n      "url": "https://spaces.example.com/file-key-2.png",\r\n      "size": 2048000,\r\n      "mimeType": "image/png",\r\n      "type": "image"\r\n    },\r\n    {\r\n      "fileKey": "file-key-3",\r\n      "url": "https://spaces.example.com/file-key-3.mp4",\r\n      "size": 10485760,\r\n      "mimeType": "video/mp4",\r\n      "type": "video"\r\n    }\r\n  ],\r\n  "totalSize": 13557760,\r\n  "uploadedAt": "2025-01-15T10:00:00Z"\r\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"delete-file",children:"Delete File"}),"\n",(0,i.jsx)(n.p,{children:"Delete an uploaded file."}),"\n",(0,i.jsx)(n.h3,{id:"endpoint-2",children:"Endpoint"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"DELETE /v1/storage/:fileKey\n"})}),"\n",(0,i.jsx)(n.h3,{id:"parameters",children:"Parameters"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"fileKey"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"The file key returned from upload"})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"example-request-2",children:"Example Request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const fileKey = 'unique-file-key-123';\r\n\r\nconst response = await fetch(`https://api.metaenix.com/v1/storage/${fileKey}`, {\r\n  method: 'DELETE',\r\n  headers: {\r\n    'Authorization': `Bearer ${accessToken}`,\r\n  },\r\n});\r\n\r\nif (response.status === 204) {\r\n  console.log('File deleted successfully');\r\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"response-2",children:"Response"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"204 No Content"})," - File deleted successfully"]}),"\n",(0,i.jsx)(n.h2,{id:"get-file-info",children:"Get File Info"}),"\n",(0,i.jsx)(n.p,{children:"Get information about an uploaded file."}),"\n",(0,i.jsx)(n.h3,{id:"endpoint-3",children:"Endpoint"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"GET /v1/storage/:fileKey\n"})}),"\n",(0,i.jsx)(n.h3,{id:"example-request-3",children:"Example Request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const fileKey = 'unique-file-key-123';\r\n\r\nconst response = await fetch(`https://api.metaenix.com/v1/storage/${fileKey}`, {\r\n  headers: {\r\n    'Authorization': `Bearer ${accessToken}`,\r\n  },\r\n});\r\n\r\nconst fileInfo = await response.json();\n"})}),"\n",(0,i.jsx)(n.h3,{id:"response-3",children:"Response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n  "fileKey": "unique-file-key-123",\r\n  "url": "https://spaces.example.com/unique-file-key-123.jpg",\r\n  "size": 1024000,\r\n  "mimeType": "image/jpeg",\r\n  "type": "image",\r\n  "uploadedBy": {\r\n    "id": "user-uuid",\r\n    "username": "johndoe"\r\n  },\r\n  "uploadedAt": "2025-01-15T10:00:00Z"\r\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"get-user-files",children:"Get User Files"}),"\n",(0,i.jsx)(n.p,{children:"Get a list of files uploaded by the authenticated user."}),"\n",(0,i.jsx)(n.h3,{id:"endpoint-4",children:"Endpoint"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"GET /v1/storage\n"})}),"\n",(0,i.jsx)(n.h3,{id:"query-parameters",children:"Query Parameters"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"page"})}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"Page number (default: 1)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"limit"})}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"Items per page (default: 20, max: 100)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"type"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsxs)(n.td,{children:["Filter by file type: ",(0,i.jsx)(n.code,{children:"image"}),", ",(0,i.jsx)(n.code,{children:"video"}),", ",(0,i.jsx)(n.code,{children:"audio"}),", ",(0,i.jsx)(n.code,{children:"document"})]})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"example-request-4",children:"Example Request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const response = await fetch('https://api.metaenix.com/v1/storage?page=1&limit=20&type=image', {\r\n  headers: {\r\n    'Authorization': `Bearer ${accessToken}`,\r\n  },\r\n});\r\n\r\nconst data = await response.json();\n"})}),"\n",(0,i.jsx)(n.h3,{id:"response-4",children:"Response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n  "data": [\r\n    {\r\n      "fileKey": "file-key-1",\r\n      "url": "https://spaces.example.com/file-key-1.jpg",\r\n      "size": 1024000,\r\n      "mimeType": "image/jpeg",\r\n      "type": "image",\r\n      "uploadedAt": "2025-01-15T10:00:00Z"\r\n    },\r\n    {\r\n      "fileKey": "file-key-2",\r\n      "url": "https://spaces.example.com/file-key-2.png",\r\n      "size": 2048000,\r\n      "mimeType": "image/png",\r\n      "type": "image",\r\n      "uploadedAt": "2025-01-14T15:30:00Z"\r\n    }\r\n  ],\r\n  "meta": {\r\n    "page": 1,\r\n    "limit": 20,\r\n    "total": 50,\r\n    "totalPages": 3,\r\n    "totalSize": 52428800\r\n  }\r\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"storage-quota",children:"Storage Quota"}),"\n",(0,i.jsx)(n.p,{children:"Check your storage usage and limits."}),"\n",(0,i.jsx)(n.h3,{id:"endpoint-5",children:"Endpoint"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"GET /v1/users/me\n"})}),"\n",(0,i.jsx)(n.p,{children:"The response includes storage information:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n  "id": "user-uuid",\r\n  "username": "johndoe",\r\n  "storage": {\r\n    "used": 52428800,\r\n    "limit": 1073741824,\r\n    "usedPercentage": 4.88\r\n  }\r\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"using-files-in-posts",children:"Using Files in Posts"}),"\n",(0,i.jsxs)(n.p,{children:["After uploading a file, use the ",(0,i.jsx)(n.code,{children:"fileKey"})," in your post creation:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// 1. Upload file\r\nconst uploadResponse = await fetch('https://api.metaenix.com/v1/storage/upload', {\r\n  method: 'POST',\r\n  headers: {\r\n    'Authorization': `Bearer ${accessToken}`,\r\n  },\r\n  body: formData,\r\n});\r\n\r\nconst { fileKey } = await uploadResponse.json();\r\n\r\n// 2. Create post with file\r\nconst postResponse = await fetch('https://api.metaenix.com/v1/posts', {\r\n  method: 'POST',\r\n  headers: {\r\n    'Authorization': `Bearer ${accessToken}`,\r\n    'Content-Type': 'application/json',\r\n  },\r\n  body: JSON.stringify({\r\n    content: 'Check out this image!',\r\n    media: [fileKey],\r\n  }),\r\n});\n"})}),"\n",(0,i.jsx)(n.h2,{id:"error-responses",children:"Error Responses"}),"\n",(0,i.jsx)(n.h3,{id:"400-bad-request",children:"400 Bad Request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n  "statusCode": 400,\r\n  "message": "File size exceeds maximum limit"\r\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"403-forbidden",children:"403 Forbidden"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n  "statusCode": 403,\r\n  "message": "Storage quota exceeded"\r\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"404-not-found",children:"404 Not Found"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n  "statusCode": 404,\r\n  "message": "File not found"\r\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"415-unsupported-media-type",children:"415 Unsupported Media Type"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n  "statusCode": 415,\r\n  "message": "File type not supported"\r\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"required-scopes",children:"Required Scopes"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"read:storage"})," - Read file metadata"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"write:storage"})," - Upload and delete files"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"rate-limits",children:"Rate Limits"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Upload:"})," 20 uploads per minute"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Delete:"})," 30 deletions per minute"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Validate file types"})," - Check file types client-side before uploading"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Compress images"})," - Compress images before uploading to save storage"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Handle errors"})," - Always handle quota exceeded and file size errors"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Clean up unused files"})," - Delete files that are no longer needed"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use appropriate file types"})," - Use the right format for your use case"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"./posts",children:"Posts API"})})," - Use uploaded files in posts"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"./users",children:"Users API"})})," - Check storage quota and usage"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>t});var r=s(6540);const i={},l=r.createContext(i);function a(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);